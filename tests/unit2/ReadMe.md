[Pre-Notes]

This method has been verified on Ubuntu. But having some memory protection issue on Fedora.

So Ubuntu is recommended.

[Prerequisites]:

Build the `zephyr/samples/hello_world` for `qemu_x86_64` board. Because an `autoconf.h` file contains the macro definitions needed to preprocess the headers hierachy included by the c file under test. The `autoconf.h` file is generated by a build. So I leverage the helloworld sample. Otherwise, I will have to manually tune the macros.

The helloworld build folder is assumed to be `zephyr/build/hello_world_qemu_x86_64`

Please use `Ninja` as the CMake generator.

Prerequisites steps as below

```
cd <your local zephyr folder for this repo>
mkdir build
cd build
mkdir hello_world_qemu_x86_64
cd hello_world_qemu_x86_64
cmake -S ../../samples/hello_world/  -B . -GNinja -DBOARD=qemu_x86_64
ninja
```



[To build the test]:

```
cd zephyr/tests/unit2
mkdir build
cd build
cmake .. -GNinja -Dzephyr_dir=<your local zephyr folder of this repo>
ninja
```

[To run the test]:

```
cd zephyr/tests/unit2/build/kernel/stack_test/
./stack_test
```

[Result]:

```
test started
[==========] Running 2 test(s).
[ RUN      ] test_z_impl_k_stack_push_no_pending_thread
[       OK ] test_z_impl_k_stack_push_no_pending_thread
[ RUN      ] test_z_impl_k_stack_push_with_pending_thread
[       OK ] test_z_impl_k_stack_push_with_pending_thread
[==========] 2 test(s) run.
[  PASSED  ] 2 test(s).
```

[Post-Notes]:

You will see warning for "ALWAYS_INLINE" redefined.
It is expected because I have to disable inline to keep the function body so that mocking can work.
